# stock bot

## 项目介绍

stock bot 是一个用于抓取和分析中国三大证券交易所股票数据的自动化工具。它旨在帮助投资者通过数据驱动的方法理解股票市场的行为模式，从而辅助决策。
stock bot 系统可以将中国三大证券交易所的股票进行分类，每个交易所内按“股票类别/板块/类型”进一步分组，并持续抓取股票的交易数据，形成可复用的数据集。通过对股票进行“行为相似性”聚类，stock bot 能够分析和解释各类股票的起伏趋势特征。

## 功能特点
- 自动抓取三大交易所的全量股票列表，构建股票池。
- 持续抓取股票交易数据（K 线/成交量/涨跌幅等），形成可复用的数据集。
- 对股票进行“行为相似性”聚类，分析和解释各类股票的起伏趋势特征。
- 提供数据分析与解释，辅助投资者做出更明智的投资决策。
- 明确风险提示，不提供任何“保证收益”的投资建议。
- 专注于数据与分析，不涉及券商交易下单功能。
- 模块化设计，支持替换数据源以适应不同需求。
- 支持至少近 3 年的日频数据回溯，满足长期分析需求。
- 增量更新功能，确保数据的时效性和准确性。
- 用户友好的界面，方便用户操作和查看分析结果。

## 架构设计
- 数据抓取模块：负责从三大交易所及其他数据源抓取股票列表和交易数据。
- 数据存储模块：用于存储抓取的股票数据，支持高效查询和分析。
- 数据分析模块：实现股票的行为相似性聚类和趋势特征分析。
- 用户界面模块：提供用户交互界面，展示数据和分析结果。

**目录组织**：
```shell
stock-bot
├───.github
├───.vscode
├───docs            ################################### 项目文档
└───src
    ├───cli         ################################### 命令行接口模块
    ├───fetchers    ################################### 交易所股票列表数据抓取模块
    │   ├───bse     ################################### 北京证券交易所抓取器
    │   ├───sse     ################################### 上海证券交易所抓取器
    │   └───sze     ################################### 深圳证券交易所抓取器
    ├───models      ################################### 数据模型模块, 包括股票、交易数据等定义
    ├───normalizers ################################### 数据规范化模块, 负责清洗和标准化抓取的数据
    ├───providers   ################################### 行情数据接口模块
    └───storage     ################################### 数据存储模块
```

**storage module**：

负责将fetchers 抓取到的股票数据存储在文件中。文件和目录的组织形式如下：

用“快照目录 + manifest + 明细文件”：
- 快照目录：按抓取时间或内容哈希
- manifest：记录来源 URL、抓取时间、解析版本、字段说明、统计信息（数量、类别数等）
- 明细：按 exchange/category 分文件

**目录示例如下**：
```text
data/
  universe/
    snapshot=2026-01-29T23-00-00Z/
      manifest.json
      Shanghai_Stocks/
        class=XXX.jsonl
        class=YYY.jsonl
      Shenzen_Stocks/
        class=XXX.jsonl
      Beijing_Stocks/
        class=XXX.jsonl
```
文件格式建议使用 JSON Lines，方便增量写入与处理。
- JSONL（json lines）：一行一条股票记录，易追加、易流式写入、易排查
- 字段设计参考 fetchers 模块输出

每条记录至少包含：
- exchange（严格用：Shanghai_Stocks / Shenzen_Stocks / Beijing_Stocks）
- symbol
- name
- category（交易所官方分类原文）
- source（URL/抓取批次 id）
- asof（快照时间）

注意：各交易所“类别/板块/类型”口径可能不同。M0 可以先保留原始 category 文本，不要急着做跨所统一映射


## 安装与使用
